!function(){var e,t={5316:function(){function e(e,n){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){a&&(e=a);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,c=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){c=!0,i=e},f:function(){try{l||null==a.return||a.return()}finally{if(c)throw i}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var n=new URL(location.href),a=new URLSearchParams(n.search).get("id"),o=document.querySelector(".container");fetch("http://localhost:5000/tour"+String(a),{method:"GET",headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){!function(t){o.innerHTML="";var n=document.createElement("div"),a=document.createElement("div"),r=document.createElement("h1"),i=document.createElement("a"),l=document.createElement("div"),c=document.createElement("img"),d=document.createElement("div"),u=document.createElement("div"),s=document.createElement("img"),m=document.createElement("p"),p=document.createElement("span"),f=document.createElement("span"),h=document.createElement("div"),v=document.createElement("h3"),_=document.createElement("p"),C=document.createElement("button"),y=document.createElement("div"),g=document.createElement("h3"),b=document.createElement("div"),E=document.createElement("p"),x=t.duration.split(":"),S="",L="";1===parseInt(x[0])||(parseInt(x[0])-1)%10==0?S=" час ":(/[2-4]$/.test(x[0])||/[5-90]$/.test(x[0]))&&(S=" часа "),1===parseInt(x[1])||(parseInt(x[1])-1)%10==0?L=" минута":/[2-4]$/.test(x[1])?L=" минуты":/[5-90]$/.test(x[1])&&(L=" минут");var D=t.flight_dates[0],O=new Date,k=D.date+" "+D.times[0],w=6e4*-O.getTimezoneOffset(),N=6e4*t.time_zone,A=new Date(O.toISOString().slice(0,10)),T=new Date(k).getTime(),I=new Date(T-N+w);if(console.log(k,T,w,new Date(T-N+w)),document.createElement("span").className="timetable__date",A.toLocaleDateString()===I.toLocaleDateString())E.textContent="сегодня";else if(A.toLocaleDateString()<I.toLocaleDateString())E.textContent=I.toLocaleDateString();else{var j,q,B=e(t.flight_dates);try{for(B.s();!(q=B.n()).done;){var M=q.value;k=M.date+" "+M.times[0];var R=new Date(k);T=R.getTime(),(I=new Date(T-N+w)).toLocaleDateString()==A.toLocaleDateString()&&(j=M)}}catch(e){B.e(e)}finally{B.f()}j&&(E.textContent="сегодня",D=j)}var H=parseInt(x[0])?parseInt(x[0])+S:"",$=parseInt(x[1])?x[1]+L:"";i.textContent="Назад к списку экскурсий",r.textContent=t.title,p.textContent="Продолжительность: ",f.textContent=H+$,v.textContent="Подробнее об экскурсии",_.textContent=t.description,C.textContent="Забронировать",g.textContent="Ближайший рейс:",i.className="container__link",n.className="tour",a.className="tour__title-block",r.className="tour__title",l.className="tour__img-block",c.className="tour__img",d.className="tour__time-block",u.className="tour__time-icon-block",m.className="tour__time-text",f.className="tour__time-duration",p.className="tour__time-desc",h.className="tour__desc-block",v.className="tour__desc-title",_.className="tour__desc",C.className="tour__btn btn",y.className="tour__timetable timetable",g.className="timetable__title",b.className="timetable__date",E.className="timetable__date-text",c.src=t.image,c.alt=t.title,s.src="./clock-circular-outline.svg",s.alt=" clock-icon",i.href="./index.html",i.target="_self",E.textContent&&(b.appendChild(E),D.times.map((function(e){k=D.date+" "+e;var t=new Date(k);T=t.getTime();var n=(I=new Date(T-N+w)).toLocaleTimeString().slice(0,5),a=document.createElement("button");a.className="timetable__item btn",a.textContent=n,e&&b.appendChild(a)}))),a.appendChild(r),l.appendChild(c),u.appendChild(s),d.appendChild(u),m.appendChild(p),m.appendChild(f),d.appendChild(m),h.appendChild(v),h.appendChild(_),y.appendChild(g),y.appendChild(b),n.appendChild(a),n.appendChild(l),n.appendChild(d),n.appendChild(h),n.appendChild(y),n.appendChild(C),o.appendChild(i),o.appendChild(n),function(){var t,n=document.querySelectorAll(".btn"),a=document.querySelector(".modal"),o=document.querySelector(".modal__close"),r=e(n);try{for(r.s();!(t=r.n()).done;)t.value.addEventListener("click",(function(){a.classList.add("visible")}))}catch(e){r.e(e)}finally{r.f()}a.addEventListener("click",(function(e){e.target.classList.contains("modal__background")&&a.classList.remove("visible")})),o.addEventListener("click",(function(e){a.classList.remove("visible")}))}(),function(t){var n,a,o,r=["Из A в B","Из В в А","Из A в B и обратно в А"],i=[],l=document.querySelector(".form__date"),c=document.querySelector(".form__route"),d=document.querySelector(".form__time"),u=document.querySelector(".form__back-time");DateOption=document.createElement("option"),RouteOption=document.createElement("option"),DateOption.value="",RouteOption.value="",DateOption.textContent="Выберите дату",RouteOption.textContent="Выберите направление",l.appendChild(DateOption),c.appendChild(RouteOption);var s,m=e(t.flight_dates);try{for(m.s();!(s=m.n()).done;){item=s.value;var p=new Date,f=6e4*-p.getTimezoneOffset(),h=6e4*t.time_zone,v=item.date+" "+item.times[0],_=new Date(v),C=_.getTime(),y=new Date(C-h+f).toLocaleDateString();if(_.toLocaleDateString()>=p.toLocaleDateString()){var g=document.createElement("option");g.value=item.date,g.textContent=y,l.appendChild(g)}}}catch(e){m.e(e)}finally{m.f()}for(var b=0,E=r;b<E.length;b++){item=E[b];var x=document.createElement("option");x.value=item,x.textContent=item,c.appendChild(x)}l.addEventListener("change",(function(){console.log(this.name,this.value),n=this.value})),c.addEventListener("change",(function(){var r=document.createElement("option");if(r.value="",r.textContent="Выберите время",d.appendChild(r),"Из A в B"===this.value){a=t.flight_dates.find((function(e){return e.date===n})),i=a.times,console.log(i),d.innerHTML="",d.appendChild(r),u.style.display="none",d.style.display="block";var l,c=e(a.times);try{for(c.s();!(l=c.n()).done;){var s=l.value,m=document.createElement("option");m.value=s+"("+this.value+")",m.textContent=s+"("+this.value+")",d.appendChild(m)}}catch(e){c.e(e)}finally{c.f()}}else if("Из В в А"===this.value){a=t.back_flight_dates.find((function(e){return e.date===n})),u.innerHTML="",u.appendChild(r),u.style.display="block",d.style.display="none";var p,f=e(a.times);try{for(f.s();!(p=f.n()).done;){var h=p.value,v=document.createElement("option");v.value=h+"("+this.value+")",v.textContent=h+"("+this.value+")",u.appendChild(v)}}catch(e){f.e(e)}finally{f.f()}}else if("Из A в B и обратно в А"===this.value){a=t.flight_dates.find((function(e){return e.date===n})),o=t.back_flight_dates.find((function(e){return e.date===n})),d.innerHTML="",u.style.display="block",d.style.display="block",d.appendChild(r);var _,C=e(a.times);try{for(C.s();!(_=C.n()).done;){var y=_.value,g=document.createElement("option");g.value=y+"(Из A в B)",g.textContent=y+"(Из A в B)",d.appendChild(g)}}catch(e){C.e(e)}finally{C.f()}var b,E=e(o.times);try{for(E.s();!(b=E.n()).done;){var x=b.value,S=document.createElement("option");S.value=x+"(Из B в A)",S.textContent=x+"(Из B в A)",u.appendChild(S)}}catch(e){E.e(e)}finally{E.f()}}else d.innerHTML="",d.appendChild(r)}))}(t)}(t)})).catch((function(e){console.log(e)}))},1400:function(e,t,n){"use strict";n(5316)}},n={};function a(e){var o=n[e];if(void 0!==o)return o.exports;var r=n[e]={id:e,loaded:!1,exports:{}};return t[e](r,r.exports,a),r.loaded=!0,r.exports}a.m=t,e=[],a.O=function(t,n,o,r){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],r=e[u][2];for(var l=!0,c=0;c<n.length;c++)(!1&r||i>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[c])}))?n.splice(c--,1):(l=!1,r<i&&(i=r));if(l){e.splice(u--,1);var d=o();void 0!==d&&(t=d)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,o,r]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e={851:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,r,i=n[0],l=n[1],c=n[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(o in l)a.o(l,o)&&(a.m[o]=l[o]);if(c)var u=c(a)}for(t&&t(n);d<i.length;d++)r=i[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(u)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),a.O(void 0,[866],(function(){return a(6005)})),a.O(void 0,[866],(function(){return a(7216)}));var o=a.O(void 0,[866],(function(){return a(1400)}));o=a.O(o)}();